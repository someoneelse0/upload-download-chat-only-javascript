<!DOCTYPE html>
<html>
	<head>
		<base target="_blank" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1.0" />
		<title>title</title>
	</head>
	<body>
		<form action="upload" method="post" enctype="multipart/form-data">
			<fieldset>
				<legend>Upload a file</legend>
				<input type="file" name="a" />
				<button>Send</button>
			</fieldset>
		</form>
		<ul>
			<li>matrix.jpg <a href="/download/matrix.jpg">download</a></li>
			<li><a href="#">At this moment I am sleeping, I fix this maybe tomorrow tomorrowland</a></li>
		</ul>
		<div>
			<p>Username</p>
			<input type="text" class="username" />
			<p>Message</p>
			<input type="text" class="message" />
			<button>Send</button>
			<div></div>
		</div>
		<script src="/socket.io/socket.io.js"></script>
		<script>
			let i=io()
			let iu=document.getElementsByClassName("username")[0];
			let im=document.getElementsByClassName("message")[0];
			let div=document.getElementsByTagName("div")[1];
			let btn=document.getElementsByTagName("button")[1];
			btn.addEventListener("click",function(e){
				e.preventDefault();
				if(iu.value!="" && im.value!=""){
					i.emit("f",{username:iu.value,message:im.value});
				}else{
					iu.placeholder="¡¡ FIELD REQUIRED !!";
					im.placeholder="¡¡ FIELD REQUIRED !!";
				}
			},false);
			i.on("f",(d)=>{
				let p=document.createElement("p");
				let tx=document.createTextNode(d.username+": "+d.message);
				p.appendChild(tx);
				div.appendChild(p);
			});
		</script>
	</body>
</html>
